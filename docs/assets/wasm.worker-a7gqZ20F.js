(function(){"use strict";let s=null;const n="/atari-go/wasm/";self.onmessage=async c=>{const{type:a,payload:r}=c.data;if(a==="init"){const e=r==null?void 0:r.fileName;if(!e){self.postMessage({type:"error",payload:"Initialization error: A 'fileName' must be provided, e.g., 'atari-go-9x9'."});return}try{self.Module={locateFile:i=>`${n}${i}`,onRuntimeInitialized:()=>{s={getBestMove:self.Module.cwrap("getBestMove","string",["string"]),checkCapture:self.Module.cwrap("checkCapture","string",["string"])},self.postMessage({type:"initialized"})},print:i=>{},printErr:i=>{}};const t=`${n}${e}.js`,o=await fetch(t);if(!o.ok)throw new Error(`Failed to fetch script at ${t}: ${o.statusText}`);const p=await o.text(),f=new Blob([p],{type:"application/javascript"}),l=URL.createObjectURL(f);await import(l),URL.revokeObjectURL(l)}catch(t){const o=t instanceof Error?t.message:String(t);self.postMessage({type:"error",payload:o})}}else if(a==="getBestMove"){if(!s){self.postMessage({type:"error",payload:"WebAssembly module not initialized"});return}try{const e=s.getBestMove(r);self.postMessage({type:"moveDone",payload:e})}catch(e){const t=e instanceof Error?e.message:String(e);self.postMessage({type:"error",payload:t})}}else if(a==="checkCapture"){if(!s){self.postMessage({type:"error",payload:"WebAssembly module not initialized"});return}try{const e=s.checkCapture(r);self.postMessage({type:"checkCaptureDone",payload:e})}catch(e){const t=e instanceof Error?e.message:String(e);self.postMessage({type:"error",payload:t})}}}})();
